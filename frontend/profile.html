<!DOCTYPE html>
<html lang="ru">
<header>
    <h1><a href="index.html" style="color: white; text-decoration: none;">Дар Солнца</a></h1>
    <nav>
        <ul>
            <li><a href="index.html">Главная</a></li>
            <li><a href="products.html">Каталог</a></li>
            <li><a href="about.html">О нас</a></li>
            <li><a href="contacts.html">Контакты</a></li>
            <li><a href="cart.html">Корзина</a></li>
            <li><a href="profile.html">Вход</a></li>
        </ul>
    </nav>
</header>

<head>
    <link rel="stylesheet" href="styles.css">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Личный кабинет</title>
</head>
<body>
    <h2>Личный кабинет</h2>
    <p id="welcomeMessage"></p>
    <button id="logoutButton">Выйти</button>

    <script>
        async function checkProfile() {
            let response = await fetch("http://localhost/dary-solntsa/backend/auth/profile.php");
            let result = await response.json();

            if (result.status === "success") {
                document.getElementById("welcomeMessage").innerText = "Привет, " + result.username + "!";
            } else {
                document.getElementById("welcomeMessage").innerText = "Вы не авторизованы.";
            }
        }

        document.getElementById("logoutButton").addEventListener("click", async function() {
            let response = await fetch("http://localhost/dary-solntsa/backend/auth/logout.php");
            let result = await response.json();

            alert(result.message);
            window.location.href = "login.html";
        });

        checkProfile();
    </script>
    <footer>
        <p>&copy; 2025 Дар Солнца – Магазин янтаря</p>
    </footer>
    
</body>
</html>